/*!
 * jQuery Upload File Plugin
 * version: 4.0.11
 * @requires jQuery v1.5 or later & form plugin
 * Copyright (c) 2013 Ravishanker Kusuma
 * http://hayageek.com/
 */
!function(e){null==e.fn.ajaxForm&&e.getScript(("https:"==document.location.protocol?"https://":"http://")+"malsup.github.io/jquery.form.js");var a={};a.fileapi=void 0!==e("<input type='file'/>").get(0).files,a.formdata=void 0!==window.FormData,e.fn.uploadFile=function(t){var r=e.extend({url:"",method:"POST",enctype:"multipart/form-data",returnType:null,allowDuplicates:!0,duplicateStrict:!1,allowedTypes:"*",acceptFiles:"*",fileName:"file",formData:!1,dynamicFormData:!1,maxFileSize:-1,maxFileCount:-1,multiple:!0,dragDrop:!0,autoSubmit:!0,showCancel:!0,showAbort:!0,showDone:!1,showDelete:!1,showError:!0,showStatusAfterSuccess:!0,showStatusAfterError:!0,showFileCounter:!0,fileCounterStyle:"). ",showFileSize:!0,showProgress:!1,nestedForms:!0,showDownload:!1,onLoad:function(e){},onSelect:function(e){return!0},onSubmit:function(e,a){},onSuccess:function(e,a,t,r){},onError:function(e,a,t,r){},onCancel:function(e,a){},onAbort:function(e,a){},downloadCallback:!1,deleteCallback:!1,afterUploadAll:!1,serialize:!0,sequential:!1,sequentialCount:2,customProgressBar:!1,abortButtonClass:"ajax-file-upload-abort",cancelButtonClass:"ajax-file-upload-cancel",dragDropContainerClass:"ajax-upload-dragdrop",dragDropHoverClass:"state-hover",errorClass:"ajax-file-upload-error",uploadButtonClass:"ajax-file-upload",dragDropStr:"<span><b>Drag &amp; Drop Files</b></span>",uploadStr:"Upload",abortStr:"Abort",cancelStr:"Cancel",deleteStr:"Delete",doneStr:"Done",multiDragErrorStr:"Multiple File Drag &amp; Drop is not allowed.",extErrorStr:"is not allowed. Allowed extensions: ",duplicateErrorStr:"is not allowed. File already exists.",sizeErrorStr:"is not allowed. Allowed Max size: ",uploadErrorStr:"Upload is not allowed",maxFileCountErrorStr:" is not allowed. Maximum allowed files are:",downloadStr:"Download",customErrorKeyStr:"jquery-upload-file-error",showQueueDiv:!1,statusBarWidth:400,dragdropWidth:400,showPreview:!1,previewHeight:"auto",previewWidth:"100%",extraHTML:!1,uploadQueueOrder:"top",headers:{}},t);this.fileCounter=1,this.selectedFiles=0;var o="ajax-file-upload-"+(new Date).getTime();this.formGroup=o,this.errorLog=e("<div></div>"),this.responses=[],this.existingFileNames=[],a.formdata||(r.dragDrop=!1),a.formdata&&1!==r.maxFileCount||(r.multiple=!1),e(this).html("");var s=this,i=e("<div>"+r.uploadStr+"</div>");e(i).addClass(r.uploadButtonClass),function t(){if(e.fn.ajaxForm){if(r.dragDrop){var l=e('<div class="'+r.dragDropContainerClass+'" style="vertical-align:top;"></div>').width(r.dragdropWidth);e(s).append(l),e(l).append(i),e(l).append(e(r.dragDropStr)),function(a,t,r){r.on("dragenter",function(a){a.stopPropagation(),a.preventDefault(),e(this).addClass(t.dragDropHoverClass)}),r.on("dragover",function(a){a.stopPropagation(),a.preventDefault();var r=e(this);r.hasClass(t.dragDropContainerClass)&&!r.hasClass(t.dragDropHoverClass)&&r.addClass(t.dragDropHoverClass)}),r.on("drop",function(r){r.preventDefault(),e(this).removeClass(t.dragDropHoverClass),a.errorLog.html("");var o=r.originalEvent.dataTransfer.files;!t.multiple&&o.length>1?t.showError&&e("<div class='"+t.errorClass+"'>"+t.multiDragErrorStr+"</div>").appendTo(a.errorLog):0!=t.onSelect(o)&&h(t,a,o)}),r.on("dragleave",function(a){e(this).removeClass(t.dragDropHoverClass)}),e(document).on("dragenter",function(e){e.stopPropagation(),e.preventDefault()}),e(document).on("dragover",function(a){a.stopPropagation(),a.preventDefault();var r=e(this);r.hasClass(t.dragDropContainerClass)||r.removeClass(t.dragDropHoverClass)}),e(document).on("drop",function(a){a.stopPropagation(),a.preventDefault(),e(this).removeClass(t.dragDropHoverClass)})}(s,r,l)}else e(s).append(i);e(s).append(s.errorLog),r.showQueueDiv?s.container=e("#"+r.showQueueDiv):s.container=e("<div class='ajax-file-upload-container'></div>").insertAfter(e(s)),r.onLoad.call(this,s),function t(r,o,s,i){var l="ajax-upload-id-"+(new Date).getTime();var n=e("<form method='"+s.method+"' action='"+s.url+"' enctype='"+s.enctype+"'></form>");var d="<input type='file' id='"+l+"' name='"+s.fileName+"' accept='"+s.acceptFiles+"'/>";s.multiple&&(s.fileName.indexOf("[]")!=s.fileName.length-2&&(s.fileName+="[]"),d="<input type='file' id='"+l+"' name='"+s.fileName+"' accept='"+s.acceptFiles+"' multiple/>");var u=e(d).appendTo(n);u.change(function(){r.errorLog.html("");s.allowedTypes.toLowerCase().split(",");var l=[];if(this.files){for(m=0;m<this.files.length;m++)l.push(this.files[m].name);if(0==s.onSelect(this.files))return}else{var d=e(this).val(),u=[];if(l.push(d),!f(r,s,d))return void(s.showError&&e("<div class='"+s.errorClass+"'><b>"+d+"</b> "+s.extErrorStr+s.allowedTypes+"</div>").appendTo(r.errorLog));if(u.push({name:d,size:"NA"}),0==s.onSelect(u))return}if(w(s,r),i.unbind("click"),n.hide(),t(r,o,s,i),n.addClass(o),s.serialize&&a.fileapi&&a.formdata){n.removeClass(o);var p=this.files;n.remove(),h(s,r,p)}else{for(var c="",m=0;m<l.length;m++)s.showFileCounter?c+=r.fileCounter+s.fileCounterStyle+l[m]+"<br>":c+=l[m]+"<br>",r.fileCounter++;if(-1!=s.maxFileCount&&r.selectedFiles+l.length>s.maxFileCount)return void(s.showError&&e("<div class='"+s.errorClass+"'><b>"+c+"</b> "+s.maxFileCountErrorStr+s.maxFileCount+"</div>").appendTo(r.errorLog));r.selectedFiles+=l.length;var v=new C(r,s);v.filename.html(c),b(n,s,v,l,r,null)}});s.nestedForms?(n.css({margin:0,padding:0}),i.css({position:"relative",overflow:"hidden",cursor:"default"}),u.css({position:"absolute",cursor:"pointer",top:"0px",width:"100%",height:"100%",left:"0px","z-index":"100",opacity:"0.0",filter:"alpha(opacity=0)","-ms-filter":"alpha(opacity=0)","-khtml-opacity":"0.0","-moz-opacity":"0.0"}),n.appendTo(i)):(n.appendTo(e("body")),n.css({margin:0,padding:0,display:"block",position:"absolute",left:"-250px"}),-1!=navigator.appVersion.indexOf("MSIE ")?i.attr("for",l):i.click(function(){u.click()}))}(s,o,r,i)}else window.setTimeout(t,10)}(),this.startUpload=function(){e("form").each(function(a,t){e(this).hasClass(s.formGroup)&&l.push(e(this))}),l.length>=1&&u()},this.getFileCount=function(){return s.selectedFiles},this.stopUpload=function(){e("."+r.abortButtonClass).each(function(a,t){e(this).hasClass(s.formGroup)&&e(this).click()}),e("."+r.cancelButtonClass).each(function(a,t){e(this).hasClass(s.formGroup)&&e(this).click()})},this.cancelAll=function(){e("."+r.cancelButtonClass).each(function(a,t){e(this).hasClass(s.formGroup)&&e(this).click()})},this.update=function(a){r=e.extend(r,a),a.hasOwnProperty("url")&&e("form").each(function(t,r){e(this).attr("action",a.url)})},this.enqueueFile=function(e){e instanceof File&&h(r,s,[e])},this.reset=function(e){s.fileCounter=1,s.selectedFiles=0,s.errorLog.html(""),0!=e&&s.container.html("")},this.remove=function(){s.container.html(""),e(s).remove()},this.createProgress=function(e,a,t){var o=new C(this,r);o.progressDiv.show(),o.progressbar.width("100%");var i="";return i=r.showFileCounter?s.fileCounter+r.fileCounterStyle+e:e,r.showFileSize&&(i+=" ("+p(t)+")"),o.filename.html(i),s.fileCounter++,s.selectedFiles++,r.showPreview&&(o.preview.attr("src",a),o.preview.show()),r.showDownload&&(o.download.show(),o.download.click(function(){r.downloadCallback&&r.downloadCallback.call(s,[e],o)})),r.showDelete&&(o.del.show(),o.del.click(function(){o.statusbar.hide().remove();var a=[e];r.deleteCallback&&r.deleteCallback.call(this,a,o),s.selectedFiles-=1,w(r,s)})),o},this.getResponses=function(){return this.responses};var l=[],n=[],d=!1;function u(){d||(d=!0,function e(){if(r.sequential||(r.sequentialCount=99999),0==l.length&&0==n.length)r.afterUploadAll&&r.afterUploadAll(s),d=!1;else{if(n.length<r.sequentialCount){var a=l.shift();null!=a&&(n.push(a),a.removeClass(s.formGroup),a.submit())}window.setTimeout(e,100)}}())}function p(e){var a="",t=e/1024;parseInt(t)>1024?a=(t/1024).toFixed(2)+" MB":a=t.toFixed(2)+" KB";return a}function c(a){var t,r,o=[],s=(o="string"==jQuery.type(a)?a.split("&"):e.param(a).split("&")).length,i=[];for(t=0;t<s;t++)o[t]=o[t].replace(/\+/g," "),r=o[t].split("="),i.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return i}function h(a,t,r){for(var o=0;o<r.length;o++)if(f(t,a,r[o].name))if(a.allowDuplicates||!m(t,r[o].name))if(-1!=a.maxFileSize&&r[o].size>a.maxFileSize)a.showError&&e("<div class='"+a.errorClass+"'><b>"+r[o].name+"</b> "+a.sizeErrorStr+p(a.maxFileSize)+"</div>").appendTo(t.errorLog);else if(-1!=a.maxFileCount&&t.selectedFiles>=a.maxFileCount)a.showError&&e("<div class='"+a.errorClass+"'><b>"+r[o].name+"</b> "+a.maxFileCountErrorStr+a.maxFileCount+"</div>").appendTo(t.errorLog);else{t.selectedFiles++,t.existingFileNames.push(r[o].name);var s=e.extend({},a),i=new FormData,l=a.fileName.replace("[]","");i.append(l,r[o]);var n=a.formData;if(n)for(var d=c(n),u=0;u<d.length;u++)d[u]&&i.append(d[u][0],d[u][1]);s.fileData=i;var h=new C(t,a),v="";v=a.showFileCounter?t.fileCounter+a.fileCounterStyle+r[o].name:r[o].name,a.showFileSize&&(v+=" ("+p(r[o].size)+")"),h.filename.html(v);var w=e("<form style='display:block; position:absolute;left: 150px;' class='"+t.formGroup+"' method='"+a.method+"' action='"+a.url+"' enctype='"+a.enctype+"'></form>");w.appendTo("body");var g=[];g.push(r[o].name),b(w,s,h,g,t,r[o]),t.fileCounter++}else a.showError&&e("<div class='"+a.errorClass+"'><b>"+r[o].name+"</b> "+a.duplicateErrorStr+"</div>").appendTo(t.errorLog);else a.showError&&e("<div class='"+a.errorClass+"'><b>"+r[o].name+"</b> "+a.extErrorStr+a.allowedTypes+"</div>").appendTo(t.errorLog)}function f(e,a,t){var r=a.allowedTypes.toLowerCase().split(/[\s,]+/g),o=t.split(".").pop().toLowerCase();return!("*"!=a.allowedTypes&&jQuery.inArray(o,r)<0)}function m(e,a){var t=!1;if(e.existingFileNames.length)for(var o=0;o<e.existingFileNames.length;o++)(e.existingFileNames[o]==a||r.duplicateStrict&&e.existingFileNames[o].toLowerCase()==a.toLowerCase())&&(t=!0);return t}function v(e,a){if(e.existingFileNames.length)for(var t=0;t<a.length;t++){var r=e.existingFileNames.indexOf(a[t]);-1!=r&&e.existingFileNames.splice(r,1)}}function w(a,t){if(a.showFileCounter){var r=e(t.container).find(".ajax-file-upload-filename").length;t.fileCounter=r+1,e(t.container).find(".ajax-file-upload-filename").each(function(t,o){var s=e(this).html().split(a.fileCounterStyle),i=(parseInt(s[0]),r+a.fileCounterStyle+s[1]);e(this).html(i),r--})}}function g(a,t){return this.statusbar=e("<div class='ajax-file-upload-statusbar'></div>").width(t.statusBarWidth),this.preview=e("<img class='ajax-file-upload-preview' />").width(t.previewWidth).height(t.previewHeight).appendTo(this.statusbar).hide(),this.filename=e("<div class='ajax-file-upload-filename'></div>").appendTo(this.statusbar),this.progressDiv=e("<div class='ajax-file-upload-progress'>").appendTo(this.statusbar).hide(),this.progressbar=e("<div class='ajax-file-upload-bar'></div>").appendTo(this.progressDiv),this.abort=e("<div>"+t.abortStr+"</div>").appendTo(this.statusbar).hide(),this.cancel=e("<div>"+t.cancelStr+"</div>").appendTo(this.statusbar).hide(),this.done=e("<div>"+t.doneStr+"</div>").appendTo(this.statusbar).hide(),this.download=e("<div>"+t.downloadStr+"</div>").appendTo(this.statusbar).hide(),this.del=e("<div>"+t.deleteStr+"</div>").appendTo(this.statusbar).hide(),this.abort.addClass("ajax-file-upload-red"),this.done.addClass("ajax-file-upload-green"),this.download.addClass("ajax-file-upload-green"),this.cancel.addClass("ajax-file-upload-red"),this.del.addClass("ajax-file-upload-red"),this}function C(a,t){var r=null;return(r=t.customProgressBar?new t.customProgressBar(a,t):new g(a,t)).abort.addClass(a.formGroup),r.abort.addClass(t.abortButtonClass),r.cancel.addClass(a.formGroup),r.cancel.addClass(t.cancelButtonClass),t.extraHTML&&(r.extraHTML=e("<div class='extrahtml'>"+t.extraHTML()+"</div>").insertAfter(r.filename)),"bottom"==t.uploadQueueOrder?e(a.container).append(r.statusbar):e(a.container).prepend(r.statusbar),r}function b(t,r,o,s,i,d){var p={cache:!1,contentType:!1,processData:!1,forceSync:!1,type:r.method,data:r.formData,formData:r.fileData,dataType:r.returnType,headers:r.headers,beforeSubmit:function(a,n,d){if(0!=r.onSubmit.call(this,s)){if(r.dynamicFormData){var u=c(r.dynamicFormData());if(u)for(var p=0;p<u.length;p++)u[p]&&(r.serialize&&null!=r.fileData?d.formData.append(u[p][0],u[p][1]):d.data[u[p][0]]=u[p][1])}return r.extraHTML&&e(o.extraHTML).find("input,select,textarea").each(function(a,t){r.serialize&&null!=r.fileData?d.formData.append(e(this).attr("name"),e(this).val()):d.data[e(this).attr("name")]=e(this).val()}),!0}return o.statusbar.append("<div class='"+r.errorClass+"'>"+r.uploadErrorStr+"</div>"),o.cancel.show(),t.remove(),o.cancel.click(function(){l.splice(l.indexOf(t),1),v(i,s),o.statusbar.remove(),r.onCancel.call(i,s,o),i.selectedFiles-=s.length,w(r,i)}),!1},beforeSend:function(e,t){for(var l in t.headers)e.setRequestHeader(l,t.headers[l]);o.progressDiv.show(),o.cancel.hide(),o.done.hide(),r.showAbort&&(o.abort.show(),o.abort.click(function(){v(i,s),e.abort(),i.selectedFiles-=s.length,r.onAbort.call(i,s,o)})),a.formdata?o.progressbar.width("1%"):o.progressbar.width("5%")},uploadProgress:function(e,a,t,s){s>98&&(s=98);var i=s+"%";s>1&&o.progressbar.width(i),r.showProgress&&(o.progressbar.html(i),o.progressbar.css("text-align","center"))},success:function(a,l,d){if(o.cancel.remove(),n.pop(),"json"==r.returnType&&"object"==e.type(a)&&a.hasOwnProperty(r.customErrorKeyStr)){o.abort.hide();var u=a[r.customErrorKeyStr];return r.onError.call(this,s,200,u,o),r.showStatusAfterError?(o.progressDiv.hide(),o.statusbar.append("<span class='"+r.errorClass+"'>ERROR: "+u+"</span>")):(o.statusbar.hide(),o.statusbar.remove()),i.selectedFiles-=s.length,void t.remove()}i.responses.push(a),o.progressbar.width("100%"),r.showProgress&&(o.progressbar.html("100%"),o.progressbar.css("text-align","center")),o.abort.hide(),r.onSuccess.call(this,s,a,d,o),r.showStatusAfterSuccess?(r.showDone?(o.done.show(),o.done.click(function(){o.statusbar.hide("slow"),o.statusbar.remove()})):o.done.hide(),r.showDelete?(o.del.show(),o.del.click(function(){v(i,s),o.statusbar.hide().remove(),a=s,r.deleteCallback&&r.deleteCallback.call(this,a,o),i.selectedFiles-=s.length,w(r,i)})):o.del.hide()):(o.statusbar.hide("slow"),o.statusbar.remove()),r.showDownload&&(o.download.show(),o.download.click(function(){r.downloadCallback&&r.downloadCallback(a,o)})),t.remove()},error:function(e,a,l){o.cancel.remove(),n.pop(),o.abort.hide(),"abort"==e.statusText?(o.statusbar.hide("slow").remove(),w(r,i)):(r.onError.call(this,s,a,l,o),r.showStatusAfterError?(o.progressDiv.hide(),o.statusbar.append("<span class='"+r.errorClass+"'>ERROR: "+l+"</span>")):(o.statusbar.hide(),o.statusbar.remove()),i.selectedFiles-=s.length),t.remove()}};r.showPreview&&null!=d&&"image"==d.type.toLowerCase().split("/").shift()&&function(e,a){if(e){a.show();var t=new FileReader;t.onload=function(e){a.attr("src",e.target.result)},t.readAsDataURL(e)}}(d,o.preview),r.autoSubmit?(t.ajaxForm(p),l.push(t),u()):(r.showCancel&&(o.cancel.show(),o.cancel.click(function(){l.splice(l.indexOf(t),1),v(i,s),t.remove(),o.statusbar.remove(),r.onCancel.call(i,s,o),i.selectedFiles-=s.length,w(r,i)})),t.ajaxForm(p))}return this}}(jQuery);